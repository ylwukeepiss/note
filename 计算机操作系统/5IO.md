# 输入输出
#### 除了提供抽象（进程->CPU，地址空间->内存，文件->磁盘）之外，操作系统还要控制计算机的所有I/O（输入输出）设备，操作系统必须向设备发送命令，捕捉中断，并处理设备的各种错误，在设备和系统其它部分之间提供简单且易于使用的接口；

## I/O的硬件原理
### 块设备（block device）：
#### 有自己的地址，大小通常在 [2^9, 2^16] Byte之间，硬盘、蓝光光盘、USB盘是常见的块；

### 字符设备（character device）：
#### 以字符为单位，发送或接收一个字符流，而不考虑任何块结构，不可寻址，也没有任何块结构，打印机、网络接口、鼠标，以及大多数与磁盘不同的设备都可看作字符设备；

### 设备控制器（device controller）：
![](../resource/操作系统/设备控制器.png)
#### 位于通信总线和机械部件之间，把串行的位流转化为字节块，进行必要的错误校正工作，最后复制到对应的机械部件上； 

### 内存映射IO
#### 每个控制器，都有几个寄存器，用来与CPU进行通信，通过写入这些寄存器，操作系统可以了解设备的状态，对设备发出指令，因此，为每一个控制器分配一个I/O port，通过操作端口，可以与设备实现通信；
![](../resource/操作系统/内存映射IO的三种方案.png)

#### a）单独的IO和内存空间：大多数早期计算机，都是以这种方式工作；
#### b）内存映射IO：PDP-11引入的，每个控制器分配一个内存地址，并且不会与内存的地址冲突，这样的系统称为内存映射IO；
#### c）混合方案：x86采用这一体系结构，具有内存映射IO的数据缓冲区，而控制寄存器则具有单独的IO端口；

## I/O的软件原理
## I/O的软件分层
## 盘
## 时钟
## 用户界面：键盘、鼠标、监视器
## 电源管理
